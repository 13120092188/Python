<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>商品溯源系统</title>
    <!-- load stylesheets -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400">
    <!-- Google web font "Open Sans" -->
    <link rel="stylesheet" href="static/font-awesome-4.5.0/css/font-awesome.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    <!-- Bootstrap style -->
    <link rel="stylesheet" href="static/css/hero-slider-style.css">
    <!-- Hero slider style (https://codyhouse.co/gem/hero-slider/) -->
    <link rel="stylesheet" href="static/css/magnific-popup.css">
    <!-- Magnific popup style (http://dimsemenov.com/plugins/magnific-popup/) -->
    <link rel="stylesheet" href="static/css/test_style.css">
    <!-- Templatemo style -->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
          <![endif]-->

    <style type="text/css">
        *{
            margin:0;
            padding: 0;
        }
        #container{
            width: 100%;
            height:auto;
            margin: 0 auto;
        }
        #nav{
            position:fixed;
            top:0;
            width:100%;
            z-index: 1001;
        }
        #main{
            width:100%;
            height:auto;
            margin-top:0px;
            padding-top: 0px;
        }
    </style>

</head>

 <body onload="start_onload({{data}}, {{data1}})">
        <!-- Content -->
        <div class="cd-hero" id="container">
            <div id="nav">
                <header class="tm-header">
                    <div class="text-xs-right">
                        <p><a href="admin_signin">管理员登陆</a>&emsp;&emsp;<a target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=704119073&site=qq&menu=yes"><i class="fa fa-qq fa-lg"></i>QQ客服</a>&emsp;<a href="signup">注册</a>&emsp;<a href="signin">企业登录</a>&emsp;<a href="signin1">普通登录</a></p>
                    </div>
                </header>

                <!-- Navigation -->
                <div class="cd-slider-nav">
                    <nav class="navbar">
                        <div class="tm-navbar-bg">

                            <a class="navbar-brand text-uppercase" href="#"><i class="fa fa-send-o tm-brand-icon"></i>溯源</a>

                            <button class="navbar-toggler hidden-lg-up" type="button" data-toggle="collapse" data-target="#tmNavbar">
                                &#9776;
                            </button>
                            <div class="collapse navbar-toggleable-md text-xs-center text-uppercase tm-navbar" id="tmNavbar">
                                <ul class="nav navbar-nav">
                                    <!--button 1-->
                                    <li class="nav-item active selected">
                                        <a class="nav-link" href="#0" data-no="1"> 首页 <span class="sr-only">(current)</span></a>
                                    </li>
                                    <!--button 2-->
                                    <li class="nav-item">
                                        <a class="nav-link" href="#0" data-no="2">企业商品</a>
                                    </li>
                                    <!--button 3-->

                                        <a class="nav-link nav-item" href="transaction" data-no="3">  <br>交易 </a>

                                    <!--button 4-->
                                    <li class="nav-item">
                                        <a class="nav-link" href="#0" data-no="4">所有商品</a>
                                    </li>
                                    <!--button 5-->
                                    <li class="nav-item">
                                        <a class="nav-link"  href="#0" data-no="5">企业信息</a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                    </nav>
                </div>
            </div>

            <div id="main">
                 <ul class="cd-hero-slider">  <!-- autoplay -->
                    <!-- Page 1 -->
                    <li class="selected">
                        <div class="cd-full-width">
                            <div class="container-fluid js-tm-page-content tm-page-1" data-page-no="1">

                                <div class="cd-bg-video-wrapper" data-video="static/video/moving-cloud">
                                <!-- video element will be loaded using jQuery -->
                                </div> <!-- .cd-bg-video-wrapper -->

                                <div class="row">

                                    <div class="col-xs-12">
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <form style="text-align: center;" method="post">
                                                    <input placeholder="输入商品编号" class="input-search"    name="bianhao"  type="text" required="">&emsp;&emsp;<button type="submit"  onsubmit="window.location.href= 'search'" class="button-search" >搜索</button>
                                                </form>

                                            </div>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div> <!-- .cd-full-width -->
                    </li>
                    <!-- Page 2 -->
                    <li>

                        <div class="cd-full-width">

                            <div class="container-fluid js-tm-page-content" data-page-no="2">

                                <div class="cd-bg-video-wrapper" data-video="static/video/sunset-cloud">
                                <!-- video element will be loaded using jQuery -->
                                </div> <!-- .cd-bg-video-wrapper -->

                                <div class="tm-img-gallery-container">

                                    <div id="list-of-commodity" class="tm-img-gallery gallery-one">
                                    <!-- Gallery One pop up connected with JS code below -->

                                        <!--div class="tm-img-gallery-info-container">

                                            <h2 class="tm-text-title tm-gallery-title">店内商品</h2>

                                        </div>

                                        <div class="grid-item">
                                            <div >
                                                <img onclick="window.location.href = 'chain'" src="static/img/tm-img-01-tn.jpg" alt="Image" class="img-fluid tm-img">
                                                <form method="post">
                                                    商品名称
                                                    <input value="1" style="background-color:rgba(0,0,0,0);" disabled="disabled" type="text" name="tid" required="">
                                                    <input  type="submit" value="进入"/>
                                                </form>
                                            </div>
                                        </div>

                                        <div class="grid-item">
                                            <div onclick="window.location.href = 'chain'">
                                                <img src="static/img/tm-img-01-tn.jpg" alt="Image" class="img-fluid tm-img">
                                                <p>展示商品基本信息</p>
                                            </div>
                                        </div>

                                        <div class="grid-item">
                                            <div onclick="window.location.href = 'chain'">
                                                <img src="static/img/tm-img-01-tn.jpg" alt="Image" class="img-fluid tm-img">
                                                <p>展示商品基本信息</p>
                                            </div>
                                        </div>

                                        <div class="grid-item">
                                            <div onclick="window.location.href = 'chain'">
                                                <img src="static/img/tm-img-01-tn.jpg" alt="Image" class="img-fluid tm-img">
                                                <p>展示商品基本信息</p>
                                            </div>
                                        </div-->

                                    </div>

                                </div> <!-- .tm-img-gallery-container -->

                            </div> <!-- .container-fluid -->

                        </div> <!-- .cd-full-width -->

                    </li>
                    <!-- Page 3 -->
                    <li>

                        <div class="cd-full-width">

                            <div class="container-fluid js-tm-page-content" data-page-no="3">

                                <div class="cd-bg-video-wrapper" data-video="static/video/night-light-blur">
                                <!-- video element will be loaded using jQuery -->
                                </div> <!-- .cd-bg-video-wrapper -->

                                <div class="tm-contact-page">

                                    <div class="row">

                                        <div class="col-xs-12">

                                            <div class="tm-flex tm-contact-container">

                                                <div class="tm-bg-white-translucent text-xs-center tm-textbox tm-2-col-textbox-2 tm-textbox-padding tm-textbox-padding-contact">
                                                    <h2 class="tm-contact-info">链上交易信息</h2>
                                                    <input type="text" style="height: 40px;"  name="transaction-search" class="form-control" placeholder="输入交易者姓名查询"  required/>
                                                    <h2 class="tm-contact-info text-xs-right" style="margin-top:20px;"><a href="#" onclick=""><i class="fa fa-search"></i>搜索</a></h2>
                                                    <table border="1" style="margin-top: 20px;">
                                                        <thead>
                                                            <tr>
                                                            <th>交易时间</th>
                                                            <th>卖家</th>
                                                            <th>买家</th>
                                                            <th>交易商品</th>
                                                            <th>交易金额</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                            <td>时间1</td>
                                                            <td>卖家甲</td>
                                                            <td>买家甲</td>
                                                            <td>商品甲</td>
                                                            <td>五毛钱</td>
                                                            </tr>
                                                            <tr>
                                                            <td>时间2</td>
                                                            <td>卖家乙</td>
                                                            <td>买家乙</td>
                                                            <td>商品乙</td>
                                                            <td>五毛钱</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>

                                                <div class="tm-bg-white-translucent text-xs-center tm-textbox tm-2-col-textbox-2 tm-textbox-padding tm-textbox-padding-contact">
                                                    <h2 class="tm-contact-info">我的交易</h2>
                                                    <form action="index.html" method="post" class="tm-contact-form text-xs-left">

                                                        <div style="margin-top: 5px;">交易对象<input type="text"  style="height: 40px;" name="transaction-object" class="form-control" placeholder="输入企业全称"  required/></div>

                                                        <div style="margin-top: 5px;">交易商品<input type="text"  style="height: 40px;" name="trading-goods" class="form-control" placeholder="输入商品编号"  required/></div>

                                                        <div style="margin-top: 5px;">交易金额<input type="text"  style="height: 40px;" name="transaction-amount" class="form-control" placeholder="输入交易金额"  required/></div>

                                                        <div style="margin-top: 5px;">备注信息<input type="text"  style="height: 40px;" name="note-information" class="form-control" placeholder="填写备注信息"  required/></div>

                                                        <h2 class="tm-contact-info text-xs-right" style="margin-top:20px;"><a href="#" onclick=""><i class="fa fa-send"></i>发送交易请求</a></h2>
                                                    </form>

                                                    <div class="text-xs-left">交易记录</div>

                                                    <table border="1" style="margin-top: 10px;">
                                                        <thead>
                                                            <tr>
                                                            <th>交易时间</th>
                                                            <th>交易对象</th>
                                                            <th>交易商品</th>
                                                            <th>交易金额</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody style="height:365px;">
                                                            <tr>
                                                            <td>时间</td>
                                                            <td>买家甲</td>
                                                            <td>商品甲</td>
                                                            <td>五毛钱</td>
                                                            </tr>
                                                            <tr>
                                                            <td>时间</td>
                                                            <td>买家乙</td>
                                                            <td>商品乙</td>
                                                            <td>五毛钱</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </div>

                                            </div>

                                        </div>

                                    </div>

                                </div><!-- .tm-img-gallery-container -->

                            </div> <!-- .container-fluid -->

                        </div> <!-- .cd-full-width -->

                    </li>
                    <!-- Page 4 -->
                    <li>

                        <div class="cd-full-width">
                            <div class="container-fluid js-tm-page-content" data-page-no="4">

                                <div class="cd-bg-video-wrapper" data-video="static/video/padaut-bee">
                                <!-- video element will be loaded using jQuery -->
                                </div> <!-- .cd-bg-video-wrapper -->

                                <div class="row">

                                    <div class="col-xs-12">
                                        <div class="tm-flex tm-3-col-container">

                                                <div class="tm-bg-white-translucent text-xs-center tm-textbox tm-2-col-textbox-2 tm-textbox-padding tm-textbox-padding-contact">
                                                    <div class="text-xs-center tm-textbox-padding">
                                                        <h2 class="tm-contact-info">全部商品信息</h2>
                                                        <input type="text" style="height: 40px;"  name="transaction-search" class="form-control" placeholder="输入商品名称搜索"  required/>
                                                        <h2 class="tm-contact-info text-xs-right" style="margin-top:20px;"><a href="#" onclick=""><i class="fa fa-search"></i>搜索</a></h2>
                                                        <table border="1" style="margin-top: 20px;">
                                                        <thead>
                                                            <tr>
                                                            <th>商品名称</th>
                                                            <th>所属公司</th>
                                                            <th>商品数量</th>
                                                            <th>单价</th>
                                                            <th>总价</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                            <td>时间1</td>
                                                            <td>卖家甲</td>
                                                            <td>买家甲</td>
                                                            <td>商品甲</td>
                                                            <td>五毛钱</td>
                                                            </tr>
                                                            <tr>
                                                            <td>时间2</td>
                                                            <td>卖家乙</td>
                                                            <td>买家乙</td>
                                                            <td>商品乙</td>
                                                            <td>五毛钱</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    </div>
                                                </div>

                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>

                    </li>
                    <!-- Page 5 -->
                    <li>
                        <div class="cd-full-width">

                            <div class="container-fluid js-tm-page-content" data-page-no="5">

                                <div class="cd-bg-video-wrapper" data-video="static/video/sunset-loop">
                                    <!-- video element will be loaded using jQuery -->
                                </div> <!-- .cd-bg-video-wrapper -->

                                <div class="tm-contact-page">

                                    <div class="row">

                                        <div class="col-xs-12">

                                            <div class="tm-flex tm-contact-container">

                                                <div class="tm-bg-white-translucent text-xs-left tm-textbox tm-2-col-textbox-2 tm-textbox-padding tm-textbox-padding-contact">

                                                    <!-- contact form -->
                                                    <form action="index.html" method="post" class="tm-contact-form">

                                                        <div class="form-group">

                                                            <div>公司名称<input type="text"  id="message_com_name" class="form-control" placeholder="Subject"  value="" required/></div>
                                                        </div>
                                                        <div class="form-group">

                                                            <div>公司电话<input type="text"  id="message_com_phone" class="form-control" placeholder="Subject"  required/></div>
                                                        </div>
                                                        <div class="form-group">

                                                            <div>公司地址<input type="text"  id="message_com_addr" class="form-control" placeholder="Subject"  required/></div>
                                                        </div>
                                                        <div class="form-group">

                                                            <div>联系人姓名<input type="text"  id="message_contact_name" class="form-control" placeholder="Subject"  required/></div>
                                                        </div>
                                                        <div class="form-group">

                                                            <div>联系人手机<input type="text"  id="message_contact_phone" class="form-control" placeholder="Subject"  required/></div>
                                                        </div>
                                                        <div class="form-group">

                                                            <div>联系人电子邮箱<input type="text"  id="message_contact_email" class="form-control" placeholder="Subject"  required/></div>
                                                        </div>

                                                        <div class="form-group">
                                                            <div>其他信息<textarea id="node_message" class="form-control" rows="5" placeholder="Your message" required></textarea></div>
                                                        </div>

                                                        <button type="submit" class="pull-xs-right tm-submit-btn">保存</button>

                                                    </form>

                                                </div>

                                                <div class="tm-bg-white-translucent text-xs-left tm-textbox tm-2-col-textbox-2 tm-textbox-padding tm-textbox-padding-contact">
                                                    <h2 class="tm-contact-info">123 New Street 11000, San Francisco, CA</h2>
                                                    <!-- google map goes here -->
                                                </div>

                                            </div>

                                        </div>

                                    </div>

                                </div>

                            </div>

                        </div> <!-- .cd-full-width -->
                    </li>
                 </ul> <!-- .cd-hero-slider -->

                <!--页脚-->
                <footer class="tm-footer">

                    <div class="tm-social-icons-container text-xs-center">
                        <a href="#" onclick="first_page({{data1}})" class="tm-social-link"><i class="fa fa-fast-backward"></i></a>
                        <a href="#" onclick="pre_page({{data1}})" class="tm-social-link"><i class="fa fa-backward"></i></a>
                        <a href="add" class="tm-social-link"><i class="fa fa-plus-square"></i></a>
                        <a href="#" onclick="next_page({{data1}})" class="tm-social-link"><i class="fa fa-forward"></i></a>
                        <a href="#" onclick="last_page({{data1}})" class="tm-social-link"><i class="fa fa-fast-forward"></i></a>
                    </div>

                </footer>
            </div>


        </div> <!-- .cd-hero -->


        <!-- Preloader, https://ihatetomatoes.net/create-custom-preloading-screen/ -->
        <div id="loader-wrapper">

            <div id="loader"></div>
            <div class="loader-section section-left"></div>
            <div class="loader-section section-right"></div>

        </div>

        <!-- load JS files -->
        <script src="static/js/jquery-1.11.3.min.js"></script>         <!-- jQuery (https://jquery.com/download/) -->
        <script src="static/js/tether.min.js"></script> <!-- Tether for Bootstrap (http://stackoverflow.com/questions/34567939/how-to-fix-the-error-error-bootstrap-tooltips-require-tether-http-github-h) -->
        <script src="static/js/bootstrap.min.js"></script>             <!-- Bootstrap js (v4-alpha.getbootstrap.com/) -->
        <script src="static/js/hero-slider-main.js"></script>          <!-- Hero slider (https://codyhouse.co/gem/hero-slider/) -->
        <script src="static/js/masonry.pkgd.min.js"></script>          <!-- Masonry (http://masonry.desandro.com/) -->
        <script src="static/js/jquery.magnific-popup.min.js"></script> <!-- Magnific popup (http://dimsemenov.com/plugins/magnific-popup/) -->

        <script>

            function adjustHeightOfPage(pageNo) {

                var offset = 80;
                var pageContentHeight = $(".cd-hero-slider li:nth-of-type(" + pageNo + ") .js-tm-page-content").height();

                if($(window).width() >= 992) { offset = 120; }
                else if($(window).width() < 480) { offset = 40; }

                // Get the page height
                var totalPageHeight = 15 + $('.cd-slider-nav').height()
                                        + pageContentHeight + offset
                                        + $('.tm-footer').height();

                // Adjust layout based on page height and window height
                if(totalPageHeight > $(window).height())
                {
                    $('.cd-hero-slider').addClass('small-screen');
                    $('.cd-hero-slider li:nth-of-type(' + pageNo + ')').css("min-height", totalPageHeight + "px");
                }
                else
                {
                    $('.cd-hero-slider').removeClass('small-screen');
                    $('.cd-hero-slider li:nth-of-type(' + pageNo + ')').css("min-height", "100%");
                }
            }

            /*
                Everything is loaded including images.
            */
            $(window).load(function(){

                adjustHeightOfPage(1); // Adjust page height

                /* Gallery One pop up
                -----------------------------------------*/
                $('.gallery-one').magnificPopup({
                    delegate: 'a', // child items selector, by clicking on it popup will open
                    type: 'image',
                    gallery:{enabled:true}
                });

				/* Gallery Two pop up
                -----------------------------------------*/
				$('.gallery-two').magnificPopup({
                    delegate: 'a',
                    type: 'image',
                    gallery:{enabled:true}
                });

                /* Collapse menu after click
                -----------------------------------------*/
                $('#tmNavbar a').click(function(){
                    $('#tmNavbar').collapse('hide');

                    adjustHeightOfPage($(this).data("no")); // Adjust page height
                });

                /* Browser resized
                -----------------------------------------*/
                $( window ).resize(function() {
                    var currentPageNo = $(".cd-hero-slider li.selected .js-tm-page-content").data("page-no");

                    // wait 3 seconds
                    setTimeout(function() {
                        adjustHeightOfPage( currentPageNo );
                    }, 1000);

                });

                // Remove preloader (https://ihatetomatoes.net/create-custom-preloading-screen/)
                $('body').addClass('loaded');

            });

        var index = 0;
        var max_index = 0;

        function updateCommodity(data1) {
            //先保存div中原来的html
            //var html = document.getElementById("list-of-commodity").innerHTML;
            var html = '<div class="tm-img-gallery-info-container"> <h2 class="tm-text-title tm-gallery-title">店内商品</h2> </div>';
            //再跟你想追加的代码加到一起插入div中
            var img_src = ""; //图片路径
            var name = "";
            var id = "";
            max_index = data1.length;
            var one_page = 32;
            if(max_index - index < 32) one_page = max_index - index;
            for(var i = index; i < index+one_page; i++)
            {
                if (i%4 == 0) id = data1[i];
                if (i%4 == 1) name = data1[i];
                if (i%4 == 3) {
                    img_src = data1[i];
                    html = html + ' <div class="grid-item"> <div > <img onclick="window.location.href = \'chain\'" src="' + img_src + '" alt="Image" class="img-fluid tm-img"> <form method="post"> '+ name + ' <input value="' + id + '" style="background-color:rgba(0,0,0,0);" type="text" name="tid" required=""> <input  type="submit" value="进入"/> </form> </div> </div>';
                }
            }
            document.getElementById("list-of-commodity").innerHTML = html;
        }

        function next_page(data1){
            index += 32;
            updateCommodity(data1);
        }

        function pre_page(data1){
            if(index != 0){
                index -= 32;
                updateCommodity(data1);
            }
        }

        function first_page(data1){
            index = 0;
            updateCommodity(data1);
        }

        function last_page(data1){
            index = max_index - max_index%32;
            updateCommodity(data1);
        }


        function uploadMessage(data) {
            document.getElementById("message_com_name").value = data[0];
            document.getElementById("message_com_phone").value = data[1];
            document.getElementById("message_com_addr").value = data[2];
            document.getElementById("message_contact_name").value = data[3];
            document.getElementById("message_contact_phone").value = data[4];
            document.getElementById("message_contact_email").value = data[5];
            document.getElementById("node_message").value = data[6];
        }

        function start_onload(data, data1){
            updateCommodity(data1);
            uploadMessage(data);
        }
        function c(){

               alert("即将挑战");
               window.location.href = 'add';

        }

        </script>
</body>
</html>